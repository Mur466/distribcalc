Архитектура приложения
======================

Модули приложения
1. Агент - выполняемый go-модуль. Выполняет вычисления простейших арифметических операций (из двух операндов). Получает задания от сервера и отдает результаты вычислений серверу через API (http/JSON). Может параллельно выполнять произвольное количество заданий в зависимости от настроек.

2. Сервер - выполняемый go-модуль. Получает задания от клиентов через API (http/JSON) и web-страницу. Разбивает сложные артифметические выражения на простейшие операции. По запросу агента выдает ему задание, готовое к вычислению. По запросу клиента получает результат вычислений и сохраняет. По мере готовности к вычислению следущих простейших операций, передает их агентам по их запросу. После выполнения всех входящих в выражение операций, сохраняет результат всего выражения. Отдает результат клиенту через  через API (http/JSON) и web-страницу. Может работать одновременно с произвольным количеством выражений и агентов, в том числе параллельно передавать разные операции одного выражения разным агентам. 


Архитектура агента
==================

Исходный код
------------
\distribcalc\cmd\agent\main.go 

Конфигурация 
------------
Конфигурация выполняется через параметры командной строки
```
Usage of C:\Users\mvm65\AppData\Local\Temp\go-build1880269813\b001\exe\main.exe:
  -host string
        Host to get job from (default "127.0.0.1")
  -pollint int
        Poll interval (seconds) (default 15)
  -port string
        Port of the host (default "8080")
  -timeout int
        HTTP timeout (seconds) (default 10)
  -workers int
        Maximum number of workers (default 3)
```

Порядок работы
--------------

1. Агент стартует
2. Создает воркеров по числу указанных в параметрах (запускает горутины Worker)
3. Запускает TaskChecker(), который отвечает за получение заданий от сервера и передачу их воркерам, а также выполняет heartbeat (то есть пингует сервер в целях мониторинга)

Получение заданий / heartbeat
-----------------------------
TaskCheсker по таймеру вызывает GetOperation().

В условиях задачи перечислены endpoint'ы сервера,  среди них нет отдельного для выполнения heartbeat. Поэтому для выполнения heartbeat используется тот же endpoint /give-me-operation, что и для получения задания. Но при этом, если есть свободные воркеры, GetOperation() сообщает серверу свой статус "ready" и забирает задание. Если свободных воркеров нет, сообщает статус "busy" и задание не забирает.
После получения задания, оно попадает к воркеру через канал choper

Worker вычисляет результат и передает результат на сервер через endpoint /take-operation-result

Архитектура севера
==================






